Ammonium polyphosphate is an inorganic salt of polyphosphoric acid and ammonia containing both chains and possibly branching.  Its chemical formula is H(NH4PO3)nOH showing that each monomer consists of an orthophosphate radical of a phosphorus atom with three oxygens and one negative charge neutralized by an ammonium cation leaving two bonds free to polymerize.  In the branched cases some monomers are missing the ammonium anion and instead link to three other monomers.
The properties of ammonium polyphosphate depend on the number of monomers in each molecule and to a degree on how often it branches.  Shorter chains (n < 100) are more water sensitive and less thermally stable than longer chains (n > 1000), but short polymer chains (e.g. pyro-, tripoly-, and tetrapoly-) are more soluble and show increasing solubility with increasing chain length.
Ammonium polyphosphate can be prepared by reacting concentrated phosphoric acid with ammonia.  However, iron and aluminum impurities, soluble in concentrated phosphoric acid, form gelatinous precipitates or "sludges" in ammonium polyphosphate at pH between 5 and 7. Other metal impurities such as copper, chromium, magnesium, and zinc form granular...